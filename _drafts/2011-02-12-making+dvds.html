---
layout: post
title: Making DVDs
date: '2011-02-12T06:52:00.001-08:00'
author: Larry Reid
tags:
- dvd
- video
modified_time: '2011-02-13T16:41:48.925-08:00'
blogger_id: tag:blogger.com,1999:blog-5778824359157275227.post-1427672742651098214
---

The latest time-waster to emerge from my addiction to technology is making a DVD from a video file. Turns out, it's not a simple process, like just burning the file on the DVD.<br /><br />There's a good extended summary <a href="http://womble.decadent.org.uk/talks/dvd-ukuug06/dvd-talk-ukuug06-paper.html">here</a>.<br /><br />It always helps to read Wikipedia. The <a href="http://en.wikipedia.org/wiki/Aspect_ratio_(image)">aspect ratio article</a> was very informative. So was the <a href="http://en.wikipedia.org/wiki/Mpeg">mpeg article</a>.<br /><br />I did this on Ubuntu 10.04. The tools I used are <a href="http://manpages.ubuntu.com/manpages/lucid/en/man1/ffmpeg.1.html">ffmpeg</a>, <a href="http://manpages.ubuntu.com/manpages/lucid/man1/mpegdemux.1.html">mpegdemux</a>, <a href="http://manpages.ubuntu.com/manpages/lucid/man1/mplex.1.html">mplex</a> and <a href="http://manpages.ubuntu.com/manpages/lucid/man1/dvdauthor.1.html">dvdauthor</a>, and <a href="http://manpages.ubuntu.com/manpages/dapper/en/man8/mkisofs.8.html">mkisofs</a>.<br /><br />I had some QuickTime videos (.mov) from <a href="http://storyofstuff.org/index.php">the Story of Stuff Project</a>. They license it under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>, and they encourage people to distribute their videos. So this isn't a tutorial on how to pirate videos.<br /><br />The process is:<br /><ol><li>Convert QuickTime to mpeg-2 -- this takes time, a minute or two for a seven minute video? QuickTime is an mpeg-4 format, so you have to convert it back to mpeg-2, which is the format DVDs work with. I think you just use ffmpeg to get the parameters from the source video. Just don't specify an output file</li><li>Split out the audio and video tracks. mpegdemux works with mpeg 1 and 2, which is why I had to convert first with ffmpeg. You have to demux first because mplex won't just multiplex a single stream and put the VOB markers on it (or is that just because of the bogus stream that gets left in the mpeg file in step 1?)</li><li>Multiplex the audio and video tracks back in, adding VOB markers into the resulting mpeg file at the same time</li><li>Create a directory that contains the video and associated files need to make a DVD</li><li>Turn that directory into an ISO image</li><li>Burn the image to a DVD</li></ol>The QuickTime file had an odd number of vertical pixels and ffmpeg complained when I tried to use the same image size, saying the height had to be a multiple of two. I made the output image one pixel smaller.<br /><br />The Story of Stuff Project videos have some weird number of pixels horizontally and vertically. From what I've read, I need to letterbox (black bars above and below) and/or pillarbox (black bars on either side) the image myself (if both, it's "windowbox"). That would be in the ffmpeg step: -padtop, -padbottom, -padleft, and -padright number of pixels.<br /><br />One of the tracks in the initial mpeg turns out it wasn't an audio or video file at all, which caused mplex to have a floating point exception when I tried to multiplex everything back together. The solution was to simply ignore that track and multiplex the other two tracks.<br /><br />The output DVD wasn't in the right place on the screen when I played it on my TV, and it didn't look right. I think there are options on dvdauthor I need to use.